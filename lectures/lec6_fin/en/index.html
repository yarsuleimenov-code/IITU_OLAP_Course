<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Infographics: Financial Analysis and Forecasting</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8; 
            color: #1f2937;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            height: 350px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }
        .card {
            background-color: white;
            border-radius: 1rem;
            padding: 2rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            margin-bottom: 2rem;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        .header-bg {
            background: linear-gradient(135deg, #6ac1e3, #5FA6C7); 
        }
        
        .ibp-step {
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-weight: 600;
            white-space: nowrap;
            transition: all 0.3s;
            font-size: 0.875rem;
        }
        .ibp-active-analysis {
            background-color: #bc5090; /* Color for Financial Analysis */
            color: white;
            box-shadow: 0 4px 6px rgba(188, 80, 144, 0.4);
        }
        .pro-list > li {
            position: relative;
            padding-left: 1.5rem;
            color: #10b981;
        }
        .pro-list > li::before {
            content: '✓';
            position: absolute;
            left: 0;
            color: #10b981;
            font-weight: bold;
        }
        .con-list > li {
            position: relative;
            padding-left: 1.5rem;
            color: #ff6361;
        }
        .con-list > li::before {
            content: '✗';
            position: absolute;
            left: 0;
            color: #ff6361;
            font-weight: bold;
        }
        .scenario-card {
            min-height: 120px;
        }
        .comparison-table th {
            text-align: left;
            padding: 0.5rem;
            border-bottom: 2px solid #e5e7eb;
            font-size: 0.875rem;
            color: #003f5c;
        }
        .comparison-table td {
            padding: 0.5rem;
            border-bottom: 1px dashed #e5e7eb;
            font-size: 0.875rem;
        }
        .comparison-table .feature {
            font-weight: 600;
            width: 30%;
        }
        .comparison-table .pro {
            color: #10b981;
        }
        .comparison-table .con {
            color: #ff6361;
        }
    </style>
</head>
<body class="text-gray-800 p-4 sm:p-8">

    <div class="container mx-auto max-w-5xl">

        <!-- Back Button -->
        <div class="mb-4">
            <a href="https://yarsuleimenov-code.github.io/IITU_OLAP_Course/en/index.html" class="inline-flex items-center text-sky-700 hover:text-sky-900 transition-colors font-semibold">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
                </svg>
                <span>Back to Lecture List</span>
            </a>
        </div>
        
        <header class="text-center mb-12 p-8 rounded-2xl header-bg text-white shadow-xl">
            <img src="/IITU_OLAP_Course/assets/Logo-white.png"
                 alt="Casplan Logo"
                 class="mx-auto mb-6 h-16">
            <h1 class="text-3xl md:text-5xl font-bold mb-2">Financial Analysis and Forecasting</h1>
            <p class="text-lg md:text-xl mt-2 text-sky-200">From budget to management decisions: adapting to changes in real-time.</p>
        </header>

        <!-- IBP Cycle Indicator: Active "Financial Analysis" -->
        <div class="mb-10 p-4 bg-white rounded-lg shadow-md border-b-2 border-gray-100 overflow-x-auto">
            <h3 class="text-sm font-bold text-gray-700 mb-2">Our Path in IBP</h3>
            <div class="flex space-x-4 items-center justify-between min-w-max">
                 <span class="ibp-step bg-gray-200 text-gray-600">S&OP (Demand)</span>
                <span class="text-gray-400">→</span>
                <span class="ibp-step bg-gray-200 text-gray-600">Logistics (Supply)</span>
                <span class="text-gray-400">→</span>
                <span class="ibp-step bg-gray-200 text-gray-600">Budgeting</span>
                <span class="text-gray-400">→</span>
                <span class="ibp-step ibp-active-analysis">Financial Analysis</span>
            </div>
        </div>

        <main class="space-y-10">
            
            <!-- SECTION I: Budgeting Methodologies: Top-Down vs. Bottom-Up -->
            <section id="budgeting-methods">
                <h2 class="text-2xl md:text-3xl font-bold text-center mb-6 text-[#003f5c]">I. Budgeting Methodologies: Top-Down vs. Bottom-Up</h2>
                <p class="max-w-3xl mx-auto text-center text-gray-600 mb-8">The choice of methodology determines the speed, accuracy, and realism of the financial plan.</p>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <!-- Top-Down -->
                    <div class="card p-6 border-l-4 border-[#58508d] bg-indigo-50">
                        <h3 class="text-2xl font-bold mb-3 text-[#58508d]">Top-Down</h3>
                        <p class="text-gray-600 mb-4">The main parameters are set by management, and details are defined to achieve these goals.</p>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <h4 class="font-semibold text-lg text-[#10b981] mb-2">Advantages (Pros)</h4>
                                <ul class="list-disc ml-4 text-sm pro-list space-y-1">
                                    <li>Minimal alignment</li>
                                    <li>Maximum centralization</li>
                                    <li>Fast preparation</li>
                                </ul>
                            </div>
                            <div>
                                <h4 class="font-semibold text-lg text-[#ff6361] mb-2">Disadvantages (Cons)</h4>
                                <ul class="list-disc ml-4 text-sm con-list space-y-1">
                                    <li>Risk of unrealistic goals</li>
                                    <li>Low employee involvement</li>
                                    <li>Weak optimization</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- Bottom-Up -->
                    <div class="card p-6 border-l-4 border-[#ffa600] bg-yellow-50">
                        <h3 class="text-2xl font-bold mb-3 text-[#ffa600]">Bottom-Up</h3>
                        <p class="text-gray-600 mb-4">Budgets are prepared by specialists in the field and then consolidated.</p>
                         <div class="grid grid-cols-2 gap-4">
                            <div>
                                <h4 class="font-semibold text-lg text-[#10b981] mb-2">Advantages (Pros)</h4>
                                <ul class="list-disc ml-4 text-sm pro-list space-y-1">
                                    <li>High accuracy and realism</li>
                                    <li>High employee motivation</li>
                                    <li>Flexibility and adaptability</li>
                                </ul>
                            </div>
                            <div>
                                <h4 class="font-semibold text-lg text-[#ff6361] mb-2">Disadvantages (Cons)</h4>
                                <ul class="list-disc ml-4 text-sm con-list space-y-1">
                                    <li>Lengthy process</li>
                                    <li>Risk of "bloated" budgets</li>
                                    <li>Complexity of alignment</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- SECTION II: Forecasting Basics: Versions, Forecasts, Scenarios -->
            <section id="forecasting-basics">
                <h2 class="text-2xl md:text-3xl font-bold text-center mb-6 text-[#bc5090]">II. Versions, Forecasts, and Scenarios: The Language of the Future</h2>
                <p class="max-w-3xl mx-auto text-center text-gray-600 mb-8">OLAP systems allow operations with the "Version" dimension, which is critical for dynamic planning and "what-if" analysis.</p>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <!-- Version -->
                    <div class="card scenario-card p-6 border-t-4 border-[#58508d] bg-indigo-50">
                        <h3 class="font-bold text-xl mb-2 text-[#58508d]">Version</h3>
                        <p class="text-sm text-gray-700">A fixed set of data (Plan, Actual, Forecast) at a specific point in time. Serves as a checkpoint.</p>
                        <p class="text-xs text-gray-500 mt-2">Example: 'Plan 2025', 'Actual Q1', 'Forecast Q3'.</p>
                    </div>
                    <!-- Forecast -->
                    <div class="card scenario-card p-6 border-t-4 border-[#ff6361] bg-red-50">
                        <h3 class="font-bold text-xl mb-2 text-[#ff6361]">Forecast</h3>
                        <p class="text-sm text-gray-700">An updated estimate of future indicators based on current data and trends. Revised regularly.</p>
                        <p class="text-xs text-gray-500 mt-2">Differs from the Budget by its relevance.</p>
                    </div>
                    <!-- Scenario -->
                    <div class="card scenario-card p-6 border-t-4 border-[#ffa600] bg-yellow-50">
                        <h3 class="font-bold text-xl mb-2 text-[#ffa600]">Scenario</h3>
                        <p class="text-sm text-gray-700">An alternative course of events (optimistic, pessimistic) to assess the range of possible outcomes.</p>
                        <p class="text-xs text-gray-500 mt-2">Example: '20% drop in demand', '15% rise in raw material prices'.</p>
                    </div>
                </div>
            </section>
            
            <!-- SECTION III: Rolling Forecast -->
            <section id="rolling-forecast">
                <h2 class="text-2xl md:text-3xl font-bold text-center mb-6 text-[#003f5c]">III. Dynamic Planning: Rolling Forecast</h2>
                <p class="max-w-3xl mx-auto text-center text-gray-600 mb-8">Rolling Forecast is a continuous process where the forecast is constantly updated, shifting forward with a fixed horizon. This is the key to adaptation.</p>

                <div class="card p-6 border-t-4 border-[#10b981] bg-white">
                    <h3 class="text-xl font-semibold mb-4 text-[#10b981]">Comparison: Budget vs. Rolling Forecast</h3>
                    <div class="chart-container"><canvas id="rollingForecastChart"></canvas></div>
                    
                    <!-- Added table comparison -->
                    <div class="mt-8 overflow-x-auto">
                        <table class="comparison-table w-full">
                            <thead>
                                <tr>
                                    <th>Characteristic</th>
                                    <th class="text-center">Classic Budget</th>
                                    <th class="text-center">Rolling Forecast</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="feature">Relevance</td>
                                    <td>Fixed once a year, quickly becomes outdated.</td>
                                    <td><span class="pro"><strong>Constantly updated, always relevant.</strong></span></td>
                                </tr>
                                <tr>
                                    <td class="feature">Flexibility</td>
                                    <td>Rigid framework, poorly adapts to changes.</td>
                                    <td><span class="pro"><strong>Flexible and dynamic, reflects environmental changes.</strong></span></td>
                                </tr>
                                <tr>
                                    <td class="feature">Complexity</td>
                                    <td><span class="con">Simpler in structure, requires fewer resources.</span></td>
                                    <td><span class="con"><strong>High time and resource costs for updates.</strong></span></td>
                                </tr>
                                <tr>
                                    <td class="feature">Focus</td>
                                    <td>Control of plan execution.</td>
                                    <td><span class="pro"><strong>Adaptation and forecasting of the real trajectory.</strong></span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <!-- End of table comparison -->
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-6 text-center">
                    <div class="p-4 bg-green-50 rounded-lg">
                        <h4 class="font-semibold text-lg text-green-700">High Relevance</h4>
                        <p class="text-sm text-gray-600">Continuous adaptation to new data, preventing cash gaps.</p>
                    </div>
                    <div class="p-4 bg-yellow-50 rounded-lg">
                        <h4 class="font-semibold text-lg text-yellow-700">Continuous Alignment</h4>
                        <p class="text-sm text-gray-600">Strategy is constantly checked against reality, without waiting for year-end.</p>
                    </div>
                    <div class="p-4 bg-red-50 rounded-lg">
                        <h4 class="font-semibold text-lg text-red-700">Resource Intensive</h4>
                        <p class="text-sm text-gray-600">The continuous process requires automation (OLAP) to reduce labor costs.</p>
                    </div>
                </div>
            </section>

            <!-- SECTION IV: Applying Scenario Analysis -->
             <section id="scenario-cases">
                <h2 class="text-2xl md:text-3xl font-bold text-center mb-6 text-[#003f5c]">IV. Scenario Analysis: Risk Management ("What If?")</h2>
                 <p class="max-w-3xl mx-auto text-center text-gray-600 mb-8">Calculating alternative options allows assessing the range of possible outcomes and proactively preparing action plans to mitigate risks.</p>
                 
                <!-- Added scenario types -->
                <div class="grid grid-cols-3 gap-4 mb-8 max-w-3xl mx-auto text-center">
                    <div class="p-3 bg-white border border-gray-200 rounded-lg shadow-sm">
                        <h4 class="font-bold text-sm text-green-600">Optimistic</h4>
                        <p class="text-xs text-gray-600">The best possible outcome.</p>
                    </div>
                    <div class="p-3 bg-white border border-gray-200 rounded-lg shadow-sm">
                        <h4 class="font-bold text-sm text-gray-700">Base Case</h4>
                        <p class="text-xs text-gray-600">The most probable scenario.</p>
                    </div>
                    <div class="p-3 bg-white border border-gray-200 rounded-lg shadow-sm">
                        <h4 class="font-bold text-sm text-red-600">Pessimistic</h4>
                        <p class="text-xs text-gray-600">Accounting for risks and constraints.</p>
                    </div>
                </div>
                <!-- End of scenario types -->

                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                    <!-- Case 1: Sales -->
                    <div class="card scenario-card p-4 bg-sky-50 border-b-4 border-sky-400">
                        <h3 class="font-bold text-sm text-sky-700 mb-1">Sales / Demand</h3>
                        <p class="text-sm text-gray-600">If sales growth is <strong>+20%</strong>? → Are production capacities and warehouse stocks sufficient?</p>
                    </div>
                    <!-- Case 2: Currency -->
                    <div class="card scenario-card p-4 bg-fuchsia-50 border-b-4 border-fuchsia-400">
                        <h3 class="font-bold text-sm text-fuchsia-700 mb-1">Currency / Import</h3>
                        <p class="text-sm text-gray-600">If the <strong>USD rate rises by +10%</strong>? → Import costs ↑ by 12%, Profit ↓ by 8%.</p>
                    </div>
                    <!-- Case 3: Costs -->
                    <div class="card scenario-card p-4 bg-amber-50 border-b-4 border-amber-400">
                        <h3 class="font-bold text-sm text-amber-700 mb-1">COGS / Raw Materials</h3>
                        <p class="text-sm text-gray-600">If raw material cost <strong>rises by +15%</strong>? → COGS ↑ by 8%, margin falls.</p>
                    </div>
                    <!-- Case 4: Liquidity -->
                    <div class="card scenario-card p-4 bg-teal-50 border-b-4 border-teal-400">
                        <h3 class="font-bold text-sm text-teal-700 mb-1">Liquidity / Gaps</h3>
                        <p class="text-sm text-gray-600">If expenses grow <strong>faster than receipts</strong>? → A cash gap will occur, requiring CF adjustments.</p>
                    </div>
                </div>
            </section>

            <!-- SECTION V: Conclusion -->
            <section id="conclusion" class="mt-12">
                <h2 class="text-2xl md:text-3xl font-bold text-center mb-6 text-[#003f5c]">V. Conclusion: The Role of OLAP in Decision Making</h2>
                <div class="card p-8 bg-[#58508d] text-white text-center">
                    <span class="text-6xl mb-4 block">💡</span>
                    <h3 class="text-2xl font-bold mb-3">Key Takeaway</h3>
                    <p class="text-lg mb-6">The management decision lies in the <strong>comparison of versions and scenarios</strong>. OLAP systems (CasPlan) provide speed, transparency, and a single version of data, which turns analysis into a proactive management tool, rather than a mere statement of facts.</p>
                    
                    <div class="flex justify-around items-center mt-6">
                        <div class="w-1/3">
                            <p class="text-4xl font-extrabold text-[#ffa600]">Instantly</p>
                            <p class="text-sm font-semibold mt-1">Scenario Recalculation</p>
                        </div>
                        <div class="w-1/3">
                            <p class="text-4xl font-extrabold text-[#ff6361]">KPI</p>
                            <p class="text-sm font-semibold mt-1">Language of Business</p>
                        </div>
                        <div class="w-1/3">
                            <p class="text-4xl font-extrabold text-[#6ac1e3]">1</p>
                            <p class="text-sm font-semibold mt-1">Single Source of Truth</p>
                        </div>
                    </div>
                </div>
            </section>

        </main>
        
        <!-- Footer -->
        <footer class="text-center mt-12 py-6 border-t border-gray-300">
            <p class="text-gray-600">The budget is the strategy, and analysis is the tool for managing it. OLAP makes this management transparent and accurate.</p>
            
            <div class="mt-6">
                <a href="https://yarsuleimenov-code.github.io/IITU_OLAP_Course/en/index.html"
                   class="inline-flex items-center px-6 py-3 bg-sky-600 text-white rounded-lg shadow hover:bg-sky-700 transition duration-300">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
                    </svg>
                    Back to Lecture List
                </a>
            </div>
        </footer>

    </div>

    <script>
        const chartColors = {
            darkBlue: '#003f5c', // Actual (Past)
            purple: '#58508d', // Base Budget
            green: '#10b981', // Rolling Forecast
            textColor: 'rgba(0, 0, 0, 0.8)',
            gridColor: 'rgba(0, 0, 0, 0.1)'
        };

        /**
         * Function to wrap long labels for charts.
         * @param {string} label - Chart label.
         * @returns {string|string[]} - Label or array of strings for wrapping.
         */
        const wrapLabel = (label) => {
            const maxLength = 16;
            if (typeof label !== 'string' || label.length <= maxLength) {
                return label;
            }
            const words = label.split(' ');
            const lines = [];
            let currentLine = '';
            for (const word of words) {
                if ((currentLine + ' ' + word).trim().length > maxLength) {
                    lines.push(currentLine.trim());
                    currentLine = word;
                } else {
                    currentLine = (currentLine + ' ' + word).trim();
                }
            }
            if (currentLine) {
                lines.push(currentLine.trim());
            }
            return lines;
        };
        
        /**
         * Callback to format Chart.js tooltip title.
         * @param {object[]} tooltipItems - Tooltip items.
         * @returns {string} - Formatted title.
         */
        const tooltipTitleCallback = (tooltipItems) => {
            const item = tooltipItems[0];
            let label = item.chart.data.labels[item.dataIndex];
            if (Array.isArray(label)) {
                return label.join(' ');
            }
            return label;
        };

        // Standard options for Chart.js
        const defaultChartOptions = {
            maintainAspectRatio: false,
            responsive: true,
            plugins: {
                legend: {
                    labels: {
                        color: chartColors.textColor
                    }
                },
                tooltip: {
                    callbacks: {
                        title: tooltipTitleCallback
                    }
                }
            },
            scales: {
                y: {
                    beginAtZero: true,
                    ticks: { color: chartColors.textColor },
                    grid: { color: chartColors.gridColor }
                },
                x: {
                    ticks: { color: chartColors.textColor },
                    grid: { color: chartColors.gridColor }
                }
            }
        };

        // Initialize Rolling Forecast Chart
        const ctxRollingForecast = document.getElementById('rollingForecastChart');
        if (ctxRollingForecast) {
            new Chart(ctxRollingForecast, {
                type: 'line',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'].map(wrapLabel),
                    datasets: [
                        {
                            label: 'Actual (Past)',
                            data: [100, 110, 105, 120, 130, 115, null, null, null, null, null, null],
                            borderColor: chartColors.darkBlue,
                            backgroundColor: chartColors.darkBlue,
                            fill: false,
                            tension: 0.2
                        },
                        {
                            label: 'Base Budget',
                            data: [105, 115, 110, 125, 135, 120, 140, 150, 145, 155, 160, 165],
                            borderColor: chartColors.purple,
                            backgroundColor: chartColors.purple,
                            borderDash: [5, 5],
                            fill: false,
                            tension: 0.2
                        },
                        {
                            label: 'Rolling Forecast (Current Projection)',
                            data: [null, null, null, null, null, null, 150, 160, 155, 170, 180, 190],
                            borderColor: chartColors.green,
                            backgroundColor: chartColors.green,
                            fill: false,
                            tension: 0.2
                        }
                    ]
                },
                options: {
                    ...defaultChartOptions,
                    scales: {
                        y: {
                            ...defaultChartOptions.scales.y,
                            title: { display: true, text: 'Profit (K $)' }
                        }
                    },
                     plugins: {
                        ...defaultChartOptions.plugins,
                        legend: {
                            position: 'bottom' 
                        }
                    }
                }
            });
        }
    </script>
</body>
</html>
