<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ò–Ω—Ñ–æ–≥—Ä–∞—Ñ–∏–∫–∞: OLAP –≤ –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏ –õ–æ–≥–∏—Å—Ç–∏–∫–∏ –∏ Supply Chain</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8; 
            color: #1f2937;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        .card-style { 
            background-color: white;
            border-radius: 1rem;
            padding: 2rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .card-style:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        .header-bg {
            background: linear-gradient(135deg, #6ac1e3, #5FA6C7); 
        }
        .flow-arrow {
            font-size: 2rem;
            color: #58508d; 
        }
    </style>
</head>
<body class="text-gray-800 p-4 sm:p-8">

    <div class="container mx-auto max-w-5xl">

        <!-- –ö–Ω–æ–ø–∫–∞ –ù–∞–∑–∞–¥ (–ù–∞—á–∞–ª–æ) -->
        <div class="mb-4">
            <a href="https://yarsuleimenov-code.github.io/IITU_OLAP_Course/" class="inline-flex items-center text-sky-700 hover:text-sky-900 transition-colors font-semibold">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
                </svg>
                <span>–ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É –ª–µ–∫—Ü–∏–π</span>
            </a>
        </div>
        <!-- –ö–Ω–æ–ø–∫–∞ –ù–∞–∑–∞–¥ (–ö–æ–Ω–µ—Ü) -->

        <header class="text-center mb-12 p-8 rounded-2xl header-bg text-white shadow-xl">
            <!-- –õ–æ–≥–æ—Ç–∏–ø (–ù–∞—á–∞–ª–æ) -->
            <img src="/IITU_OLAP_Course/assets/Logo-white.png"
                 alt="Casplan Logo"
                 class="mx-auto mb-6 h-16">
            <!-- –õ–æ–≥–æ—Ç–∏–ø (–ö–æ–Ω–µ—Ü) -->

            <h1 class="text-3xl md:text-5xl font-bold mb-2">–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏—Å—Ç–∏–∫–∏ –∏ —Ü–µ–ø–æ—á–µ–∫ –ø–æ—Å—Ç–∞–≤–æ–∫</h1>
            <p class="text-lg md:text-xl mt-2 text-sky-200">–î–≤–∏–≥–∞—Ç–µ–ª—å –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –±–∏–∑–Ω–µ—Å-–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–µ–¥–∏–Ω—è–µ—Ç —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –∫–æ–º–ø–∞–Ω–∏–∏ —Å –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–º–∏ –¥–µ–π—Å—Ç–≤–∏—è–º–∏.</p>
        </header>

        <main class="space-y-8">
            <section id="pains">
                <h2 class="text-2xl md:text-3xl font-bold text-center mb-8 text-[#003f5c]">I. –î–≤–µ –ì–ª–∞–≤–Ω—ã–µ "–ë–æ–ª–∏" –õ–æ–≥–∏—Å—Ç–∏–∫–∏</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div class="card-style flex flex-col items-center text-center p-6 border-l-4 border-[#ff6361]">
                        <span class="text-6xl mb-4 text-[#ff6361]">‚ùå</span>
                        <h3 class="text-2xl font-semibold mb-2 text-[#ff6361]">–î–µ—Ñ–∏—Ü–∏—Ç (Stock-Out)</h3>
                        <p class="text-gray-600">–ù–µ–¥–æ—Å—Ç–æ–≤–µ—Ä–Ω—ã–π –ø—Ä–æ–≥–Ω–æ–∑ –∏ —Å–±–æ–∏ –ø–æ—Å—Ç–∞–≤–æ–∫ –ø—Ä–∏–≤–æ–¥—è—Ç –∫ –ø—É—Å—Ç—ã–º –ø–æ–ª–∫–∞–º.</p>
                        <div class="mt-4 text-2xl font-bold text-[#ff6361]">-15% –ì–æ–¥–æ–≤–æ–π –í—ã—Ä—É—á–∫–∏</div>
                        <p class="text-sm text-gray-500">(–ü–æ—Ç–µ—Ä—è–Ω–Ω—ã–µ –ø—Ä–æ–¥–∞–∂–∏ –∏ —à—Ç—Ä–∞—Ñ—ã)</p>
                    </div>
                    <div class="card-style flex flex-col items-center text-center p-6 border-l-4 border-[#ffa600]">
                        <span class="text-6xl mb-4 text-[#ffa600]">üì¶</span>
                        <h3 class="text-2xl font-semibold mb-2 text-[#ffa600]">–ò–∑–ª–∏—à–∫–∏ (Overstock)</h3>
                        <p class="text-gray-600">"–ü–µ—Ä–µ—Å—Ç—Ä–∞—Ö–æ–≤–∫–∞" –∏ –Ω–µ–≤–µ—Ä–Ω—ã–π —Ä–∞—Å—á–µ—Ç –∑–∞–ø–∞—Å–æ–≤ –∑–∞–º–æ—Ä–∞–∂–∏–≤–∞—é—Ç –¥–µ–Ω—å–≥–∏.</p>
                        <div class="mt-4 text-2xl font-bold text-[#ffa600]">+25% –ó–∞—Ç—Ä–∞—Ç –Ω–∞ –•—Ä–∞–Ω–µ–Ω–∏–µ</div>
                        <p class="text-sm text-gray-500">(–ê—Ä–µ–Ω–¥–∞, –ø–µ—Ä—Å–æ–Ω–∞–ª, —É—Å—Ç–∞—Ä–µ–≤–∞–Ω–∏–µ)</p>
                    </div>
                </div>
            </section>
            
            <section id="olap-solution" class="text-center my-12">
                 <h2 class="text-2xl md:text-3xl font-bold text-center mb-8 text-[#003f5c]">II. –ö–∞–∫ OLAP –†–µ—à–∞–µ—Ç –≠—Ç–∏ –ü—Ä–æ–±–ª–µ–º—ã</h2>
                 <p class="max-w-3xl mx-auto text-gray-600 mb-8">OLAP-—Å–∏—Å—Ç–µ–º–∞, —Ç–∞–∫–∞—è –∫–∞–∫ CasPlan, –≤—ã—Å—Ç—É–ø–∞–µ—Ç "–º–æ–∑–≥–æ–º" –æ–ø–µ—Ä–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–π –ø–µ—Ä–µ–≤–æ–¥–∏—Ç –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –ø–ª–∞–Ω –ø—Ä–æ–¥–∞–∂ –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ, –∏—Å–ø–æ–ª–Ω–∏–º—ã–µ –∏ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ-–æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏.</p>
                 <div class="flex flex-col md:flex-row items-center justify-center gap-4">
                    <div class="card-style p-4 w-full md:w-1/4">
                        <h3 class="font-bold text-lg text-[#003f5c]">–ü–ª–∞–Ω –ü—Ä–æ–¥–∞–∂</h3>
                        <p class="text-sm text-gray-500">100,000 —à—Ç. —Ç–æ–≤–∞—Ä–∞</p>
                    </div>
                    <div class="flow-arrow font-bold transform md:rotate-0 rotate-90">‚Üí</div>
                     <div class="card-style p-4 w-full md:w-1/3 border-2 border-[#58508d] bg-indigo-50">
                        <h3 class="font-bold text-lg text-[#58508d]">OLAP-–Ø–¥—Ä–æ CasPlan</h3>
                        <p class="text-sm text-gray-500">3D-–ê–Ω–∞–ª–∏–∑ (SKU x –í—Ä–µ–º—è x –õ–æ–∫–∞—Ü–∏—è)</p>
                    </div>
                    <div class="flow-arrow font-bold transform md:rotate-0 rotate-90">‚Üí</div>
                    <div class="card-style p-4 w-full md:w-1/4">
                        <h3 class="font-bold text-lg text-[#003f5c]">–õ–æ–≥–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –ü–ª–∞–Ω</h3>
                        <p class="text-sm text-gray-500">–í–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Ñ—É—Ä—ã 5 700 –µ–¥. = –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—å –≤ –∑–∞–∫–∞–∑–µ 18 —Ñ—É—Ä (–∏—Ç–æ–≥–æ–≤–∞—è –ø–æ—Å—Ç–∞–≤–∫–∞ 102 600 –µ–¥)  </p>
                    </div>
                 </div>
            </section>

            <section id="deep-dive" class="my-12">
                <h2 class="text-2xl md:text-3xl font-bold text-center mb-8 text-[#003f5c]">III. –ö–ª—é—á–µ–≤—ã–µ –ó–∞–¥–∞—á–∏ –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –≤ OLAP</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <!-- 1. –ü—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ –ó–∞–ø–∞—Å–æ–≤ -->
                    <div class="card-style p-6">
                        <h3 class="text-xl font-semibold mb-2 text-[#58508d]">1. –ü—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ –ó–∞–ø–∞—Å–æ–≤</h3>
                        <p class="text-gray-600 mb-4">–ö–ª—é—á–µ–≤–∞—è –∑–∞–¥–∞—á–∞ ‚Äî –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –¥–∏–Ω–∞–º–∏–∫—É –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–≥–æ –°—Ç—Ä–∞—Ö–æ–≤–æ–≥–æ –ó–∞–ø–∞—Å–∞ (Safety Stock) –Ω–∞ –≥–æ—Ä–∏–∑–æ–Ω—Ç–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è. OLAP-—Å–∏—Å—Ç–µ–º–∞ –µ–∂–µ–º–µ—Å—è—á–Ω–æ –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç Safety Stock, —É—á–∏—Ç—ã–≤–∞—è —Å–µ–∑–æ–Ω–Ω–æ—Å—Ç—å –∏ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä—É–µ–º—É—é –Ω–µ—Ç–æ—á–Ω–æ—Å—Ç—å —Å–ø—Ä–æ—Å–∞ –∏ –ø–æ—Å—Ç–∞–≤–∫–∏.</p>
                        <div class="chart-container"><canvas id="safetyStockChart"></canvas></div>
                    </div>
                    <!-- 2. –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞ -->
                    <div class="card-style p-6">
                        <h3 class="text-xl font-semibold mb-2 text-[#003f5c]">2. –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞</h3>
                        <p class="text-gray-600 mb-4">OLAP –ø–µ—Ä–µ–≤–æ–¥–∏—Ç –ø–ª–∞–Ω –ø—Ä–æ–¥–∞–∂ –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã—Ö –µ–¥–∏–Ω–∏—Ü. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞—Ä–∞–Ω–µ–µ –≤–∏–¥–µ—Ç—å –ø–∏–∫–æ–≤—ã–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞—Ç—Ä–∞—Ç—ã, –Ω–∞–ø—Ä–∏–º–µ—Ä, –≤—ã–±–∏—Ä–∞—è —Ç–∏–ø —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞ –∏–ª–∏ –∫–æ–Ω—Å–æ–ª–∏–¥–∏—Ä—É—è –≥—Ä—É–∑—ã.</p>
                        <div class="chart-container"><canvas id="transportChart"></canvas></div>
                    </div>
                    <!-- 3. –£—Ç–∏–ª–∏–∑–∞—Ü–∏—è –°–∫–ª–∞–¥–æ–≤ (–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π) -->
                    <div class="card-style p-6">
                        <h3 class="text-xl font-semibold mb-2 text-[#ffa600]">3. –£—Ç–∏–ª–∏–∑–∞—Ü–∏—è –°–∫–ª–∞–¥–æ–≤</h3>
                        <p class="text-gray-600 mb-4">–í—ã–±–µ—Ä–∏—Ç–µ —Å–∫–ª–∞–¥, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å, –≥–¥–µ –ø–ª–∞–Ω–æ–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–µ–≤—ã—à–∞–µ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é –≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å (—É–∑–∫–æ–µ –º–µ—Å—Ç–æ). –î–µ—Ñ–∏—Ü–∏—Ç –º–æ—â–Ω–æ—Å—Ç–∏ = –≤–Ω–µ–ø–ª–∞–Ω–æ–≤—ã–µ —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ –∞—Ä–µ–Ω–¥—É.</p>
                        
                        <!-- –°–µ–ª–µ–∫—Ç–æ—Ä —Å–∫–ª–∞–¥–∞ -->
                        <select id="warehouseSelector" class="w-full mb-4 p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#ffa600] focus:border-transparent">
                            <option value="Sklad_A">–°–∫–ª–∞–¥ –ê (–ê–ª–º–∞—Ç—ã)</option>
                            <option value="Sklad_B">–°–∫–ª–∞–¥ –ë (–ê—Å—Ç–∞–Ω–∞)</option>
                            <option value="Sklad_C">–°–∫–ª–∞–¥ C (–ê—Ç—ã—Ä–∞—É)</option>
                        </select>
                        
                        <div class="chart-container"><canvas id="storageChart"></canvas></div>
                    </div>
                    <!-- 4. –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ó–∞–∫—É–ø–æ–∫ –∏ –°–Ω–∞–±–∂–µ–Ω–∏—è -->
                    <div class="card-style p-6">
                        <h3 class="text-xl font-semibold mb-2 text-[#bc5090]">4. –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ó–∞–∫—É–ø–æ–∫</h3>
                        <p class="text-gray-600 mb-4">–û—Ü–µ–Ω–∫–∞ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–∏ –≤ —Å—ã—Ä—å–µ –∏ –º–∞—Ç–µ—Ä–∏–∞–ª–∞—Ö (Raw Materials) –Ω–∞ –æ—Å–Ω–æ–≤–µ –ü–ª–∞–Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞, —á—Ç–æ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—è –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ—Å—Ç–∏ —Ü–µ–ø–∏ –ø–æ—Å—Ç–∞–≤–æ–∫. <strong>–ì—Ä–∞—Ñ–∏–∫ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π –¥–µ—Ñ–∏—Ü–∏—Ç –ø–æ –∫–ª—é—á–µ–≤–æ–º—É —Å—ã—Ä—å—é.</strong></p>
                        <div class="chart-container"><canvas id="procurementChart"></canvas></div>
                    </div>
                </div>
            </section>

            <section id="ibp" class="my-12">
                <h2 class="text-2xl md:text-3xl font-bold text-center mb-8 text-[#003f5c]">IV. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –õ–æ–≥–∏—Å—Ç–∏–∫–∏ –∏ –§–∏–Ω–∞–Ω—Å–æ–≤ (IBP)</h2>
                <p class="max-w-3xl mx-auto text-center text-gray-600 mb-8">–í IBP-—Å–∏—Å—Ç–µ–º–µ –ª–æ–≥–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –ø–ª–∞–Ω - –¥—Ä–∞–π–≤–µ—Ä –¥–ª—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–≥–æ –ø–ª–∞–Ω–∞. –ö–∞–∂–¥–æ–µ –ª–æ–≥–∏—Å—Ç–∏—á–µ—Å–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏ –æ–Ω–ª–∞–π–Ω –æ—Ç—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞ –∏—Ç–æ–≥–æ–≤–æ–π –ø—Ä–∏–±—ã–ª–∏ –∫–æ–º–ø–∞–Ω–∏–∏.</p>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-center">
                    <div class="card-style p-6">
                        <h3 class="text-lg font-semibold text-[#58508d]">–õ–æ–≥–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –î—Ä–∞–π–≤–µ—Ä—ã</h3>
                        <ul class="text-left mt-4 space-y-2 list-disc list-inside text-gray-600">
                            <li>–°—Ç–æ–∏–º–æ—Å—Ç—å –ø–µ—Ä–µ–≤–æ–∑–∫–∏</li>
                            <li>–ó–∞—Ç—Ä–∞—Ç—ã –Ω–∞ —Ö—Ä–∞–Ω–µ–Ω–∏–µ</li>
                            <li>–û–±—ä–µ–º —Å—Ç—Ä–∞—Ö–æ–≤–æ–≥–æ –∑–∞–ø–∞—Å–∞</li>
                        </ul>
                    </div>
                    <div class="flex items-center justify-center flow-arrow font-bold transform md:rotate-0 rotate-90">‚Üí</div>
                    <div class="card-style p-6">
                         <h3 class="text-lg font-semibold text-[#ff6361]">–§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –≠—Ñ—Ñ–µ–∫—Ç (P&L)</h3>
                        <ul class="text-left mt-4 space-y-2 list-disc list-inside text-gray-600">
                            <li class="text-[#ff6361]">–†–æ—Å—Ç COGS (–°–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å)</li>
                            <li class="text-[#ffa600]">–†–æ—Å—Ç OpEx (–û–ø–µ—Ä. —Ä–∞—Å—Ö–æ–¥—ã)</li>
                            <li class="text-[#003f5c]">–ò–∑–º–µ–Ω–µ–Ω–∏–µ –û–±–æ—Ä–æ—Ç–Ω–æ–≥–æ –∫–∞–ø–∏—Ç–∞–ª–∞</li>
                        </ul>
                    </div>
                </div>
            </section>
            
            <section id="scenarios" class="my-12">
                <h2 class="text-2xl md:text-3xl font-bold text-center mb-8 text-[#003f5c]">V. –°—Ü–µ–Ω–∞—Ä–Ω–æ–µ –ú–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ: –í—ã–±–æ—Ä –û–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ –†–µ—à–µ–Ω–∏—è</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                    <div class="card-style p-6">
                        <h3 class="text-xl font-semibold mb-2 text-[#58508d]">–ö–µ–π—Å: –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ü–µ—Ä–µ–≤–æ–∑—á–∏–∫–æ–≤</h3>
                        <p class="text-gray-600">–°—Ç–æ–∏—Ç –≤—ã–±–æ—Ä –º–µ–∂–¥—É –Ω–∞–¥–µ–∂–Ω—ã–º, –Ω–æ –¥–æ—Ä–æ–≥–∏–º –ø–µ—Ä–µ–≤–æ–∑—á–∏–∫–æ–º "–ê" –∏ –¥–µ—à–µ–≤—ã–º, –Ω–æ —Ä–∏—Å–∫–æ–≤–∞–Ω–Ω—ã–º "–ë". OLAP-–∞–Ω–∞–ª–∏–∑ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ –Ω–∏–∑–∫–∏–µ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–µ –∑–∞—Ç—Ä–∞—Ç—ã —É "–ë" –∫–æ–º–ø–µ–Ω—Å–∏—Ä—É—é—Ç—Å—è –≥–æ—Ä–∞–∑–¥–æ –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–∏–º–∏ –∑–∞—Ç—Ä–∞—Ç–∞–º–∏ –Ω–∞ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —É–≤–µ–ª–∏—á–µ–Ω–Ω–æ–≥–æ —Å—Ç—Ä–∞—Ö–æ–≤–æ–≥–æ –∑–∞–ø–∞—Å–∞, –¥–µ–ª–∞—è "–ê" –±–æ–ª–µ–µ –≤—ã–≥–æ–¥–Ω—ã–º —Ä–µ—à–µ–Ω–∏–µ–º –ø–æ –∏—Ç–æ–≥–æ–≤–æ–π –ø—Ä–∏–±—ã–ª–∏. <strong>–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ –ü–ª–∞–Ω –ê, –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –±–æ–ª–µ–µ –¥–æ—Ä–æ–≥–∏–µ –ø–µ—Ä–µ–≤–æ–∑–∫–∏, –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –±–æ–ª–µ–µ –≤—ã—Å–æ–∫—É—é –∏—Ç–æ–≥–æ–≤—É—é –ø—Ä–∏–±—ã–ª—å (EBITDA).</strong></p>
                    </div>
                    <div class="card-style p-6">
                        <h3 class="text-lg font-semibold mb-4 text-center text-[#003f5c]">–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –æ–±—â–µ–π —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –¥–≤—É—Ö –ø–ª–∞–Ω–æ–≤ (–≤ —Ç—ã—Å. $)</h3>
                        <div class="chart-container"><canvas id="scenarioChart"></canvas></div>
                    </div>
                </div>
            </section>

        </main>
        
        <!-- –§—É—Ç–µ—Ä —Å –∫–Ω–æ–ø–∫–æ–π "–ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É –ª–µ–∫—Ü–∏–π" (–ù–∞—á–∞–ª–æ) -->
        <footer class="text-center mt-12 py-6 border-t border-gray-300">
            <p class="text-gray-600">OLAP –≤ –ª–æ–≥–∏—Å—Ç–∏–∫–µ - –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ, –≥–∏–±–∫–æ–≥–æ –∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏ –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –±–∏–∑–Ω–µ—Å–∞.</p>
            
            <div class="mt-6">
                <a href="https://yarsuleimenov-code.github.io/IITU_OLAP_Course/"
                   class="inline-flex items-center px-6 py-3 bg-sky-600 text-white rounded-lg shadow hover:bg-sky-700 transition duration-300">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
                    </svg>
                    –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É –ª–µ–∫—Ü–∏–π
                </a>
            </div>
        </footer>
        <!-- –§—É—Ç–µ—Ä —Å –∫–Ω–æ–ø–∫–æ–π "–ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É –ª–µ–∫—Ü–∏–π" (–ö–æ–Ω–µ—Ü) -->

    </div>

    <script>
        const chartColors = {
            darkBlue: '#003f5c',
            purple: '#58508d',
            magenta: '#bc5090',
            red: '#ff6361',
            orange: '#ffa600',
            skyBlue: '#6ac1e3',
            textColor: 'rgba(0, 0, 0, 0.8)',
            gridColor: 'rgba(0, 0, 0, 0.1)'
        };

        const wrapLabel = (label) => {
            const maxLength = 16;
            if (typeof label !== 'string' || label.length <= maxLength) {
                return label;
            }
            const words = label.split(' ');
            const lines = [];
            let currentLine = '';
            for (const word of words) {
                if ((currentLine + ' ' + word).trim().length > maxLength) {
                    lines.push(currentLine.trim());
                    currentLine = word;
                } else {
                    currentLine = (currentLine + ' ' + word).trim();
                }
            }
            if (currentLine) {
                lines.push(currentLine.trim());
            }
            return lines;
        };
        
        const tooltipTitleCallback = (tooltipItems) => {
            const item = tooltipItems[0];
            let label = item.chart.data.labels[item.dataIndex];
            if (Array.isArray(label)) {
                return label.join(' ');
            }
            return label;
        };

        const defaultChartOptions = {
            maintainAspectRatio: false,
            responsive: true,
            plugins: {
                legend: {
                    labels: {
                        color: chartColors.textColor
                    }
                },
                tooltip: {
                    callbacks: {
                        title: tooltipTitleCallback
                    }
                }
            },
            scales: {
                y: {
                    beginAtZero: true,
                    ticks: { color: chartColors.textColor },
                    grid: { color: chartColors.gridColor }
                },
                x: {
                    ticks: { color: chartColors.textColor },
                    grid: { color: chartColors.gridColor }
                }
            }
        };

        // --- Data for interactive storage chart (Task 3) ---
        const warehouseData = {
            Sklad_A: {
                capacity: 3500,
                load: [3000, 3200, 3500, 3800, 3600, 3400],
                labels: ['–Ø–Ω–≤', '–§–µ–≤', '–ú–∞—Ä', '–ê–ø—Ä', '–ú–∞–π', '–ò—é–Ω']
            },
            Sklad_B: {
                capacity: 5000,
                load: [4000, 4200, 4500, 4800, 5200, 5500],
                labels: ['–Ø–Ω–≤', '–§–µ–≤', '–ú–∞—Ä', '–ê–ø—Ä', '–ú–∞–π', '–ò—é–Ω']
            },
            Sklad_C: {
                capacity: 2000,
                load: [1500, 1800, 2100, 2300, 1900, 1700],
                labels: ['–Ø–Ω–≤', '–§–µ–≤', '–ú–∞—Ä', '–ê–ø—Ä', '–ú–∞–π', '–ò—é–Ω']
            }
        };
        
        let storageChartInstance = null;
        
        function updateStorageChart(warehouseId) {
            const data = warehouseData[warehouseId];
            if (!data) return;
            
            const maxCapacity = data.capacity;
            const loadData = data.load;
            
            const datasets = [
                {
                    label: '–ü–ª–∞–Ω–æ–≤–∞—è –ó–∞–≥—Ä—É–∑–∫–∞ (–ø–∞–ª–ª–µ—Ç–æ–º–µ—Å—Ç)',
                    data: loadData,
                    backgroundColor: loadData.map(d => d > maxCapacity ? chartColors.red : chartColors.orange),
                    type: 'bar',
                    order: 2,
                },
                {
                    label: '–ú–∞–∫—Å. –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å',
                    data: Array(loadData.length).fill(maxCapacity),
                    borderColor: chartColors.darkBlue,
                    backgroundColor: 'transparent',
                    borderWidth: 2,
                    borderDash: [5, 5],
                    type: 'line',
                    pointRadius: 0,
                    pointHoverRadius: 0,
                    order: 1,
                }
            ];
            
            if (storageChartInstance) {
                storageChartInstance.data.labels = data.labels;
                storageChartInstance.data.datasets = datasets;
                storageChartInstance.options.scales.y.suggestedMax = maxCapacity * 1.2;
                storageChartInstance.update();
            } else {
                const ctx = document.getElementById('storageChart').getContext('2d');
                storageChartInstance = new Chart(ctx, {
                    data: {
                        labels: data.labels.map(wrapLabel),
                        datasets: datasets
                    },
                    options: {
                        ...defaultChartOptions,
                        scales: {
                            ...defaultChartOptions.scales,
                            y: {
                                ...defaultChartOptions.scales.y,
                                suggestedMax: maxCapacity * 1.2,
                                title: { display: true, text: '–û–±—ä–µ–º (–ø–∞–ª–ª–µ—Ç–æ–º–µ—Å—Ç)' }
                            },
                            x: {
                                ...defaultChartOptions.scales.x,
                                stacked: false
                            }
                        },
                         plugins: {
                            ...defaultChartOptions.plugins,
                            tooltip: {
                                callbacks: {
                                    ...defaultChartOptions.plugins.tooltip.callbacks,
                                    label: (context) => {
                                        let label = context.dataset.label || '';
                                        if (context.parsed.y !== null) {
                                            label += `: ${context.parsed.y}`;
                                        }
                                        if (context.dataset.type === 'bar' && context.parsed.y > maxCapacity) {
                                            label += ` (–î–ï–§–ò–¶–ò–¢!)`;
                                        }
                                        return label;
                                    }
                                }
                            }
                        }
                    }
                });
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            const selector = document.getElementById('warehouseSelector');
            if (selector) {
                selector.addEventListener('change', (e) => updateStorageChart(e.target.value));
                // Initial load
                updateStorageChart(selector.value);
            }
        });
        
        // --- End of dynamic storage chart implementation ---

        // 1. –ü—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ –ó–∞–ø–∞—Å–æ–≤ - –û–±–Ω–æ–≤–ª–µ–Ω–æ: –û—Å—å X - –ú–µ—Å—è—Ü—ã, –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ª–∏–Ω–∏—è –ü—Ä–æ–≥–Ω–æ–∑–∞ –°–ø—Ä–æ—Å–∞
        new Chart(document.getElementById('safetyStockChart'), {
            type: 'line',
            data: {
                labels: ['–Ø–Ω–≤ 25', '–§–µ–≤ 25', '–ú–∞—Ä 25', '–ê–ø—Ä 25', '–ú–∞–π 25', '–ò—é–Ω 25'].map(wrapLabel),
                datasets: [{
                    label: '–ü–ª–∞–Ω–æ–≤—ã–π –æ–±—ä–µ–º SS (–µ–¥.)',
                    data: [1500, 1450, 1600, 1800, 1750, 1950],
                    borderColor: chartColors.purple,
                    backgroundColor: 'rgba(88, 80, 141, 0.2)',
                    fill: true,
                    tension: 0.4
                },
                {
                    label: '–ü—Ä–æ–≥–Ω–æ–∑ –°–ø—Ä–æ—Å–∞ (–µ–¥.)',
                    data: [1440, 1360, 1600, 2000, 1760, 2240], 
                    borderColor: chartColors.red,
                    backgroundColor: chartColors.red,
                    fill: false,
                    tension: 0.4,
                    pointRadius: 4,
                    pointHoverRadius: 6
                }]
            },
            options: defaultChartOptions
        });

        // 2. –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞ - –û–±–Ω–æ–≤–ª–µ–Ω–æ
        new Chart(document.getElementById('transportChart'), {
            type: 'bar',
            data: {
                labels: ['–Ø–Ω–≤', '–§–µ–≤', '–ú–∞—Ä—Ç', '–ê–ø—Ä', '–ú–∞–π', '–ò—é–Ω—å'].map(wrapLabel),
                datasets: [
                    {
                        label: '–ü—Ä–æ–¥—É–∫—Ç –ê',
                        data: [12, 19, 10, 15, 8, 14],
                        backgroundColor: chartColors.darkBlue,
                    },
                    {
                        label: '–ü—Ä–æ–¥—É–∫—Ç –ë',
                        data: [8, 12, 15, 11, 18, 22],
                        backgroundColor: chartColors.magenta,
                    },
                    {
                        label: '–ü—Ä–æ–¥—É–∫—Ç –í',
                        data: [5, 6, 8, 10, 7, 9],
                        backgroundColor: chartColors.orange, 
                    },
                    {
                        label: '–ü—Ä–æ–¥—É–∫—Ç –ì',
                        data: [3, 4, 5, 6, 8, 5],
                        backgroundColor: chartColors.red, 
                    }
                ]
            },
            options: { ...defaultChartOptions, scales: { x: { stacked: true }, y: { stacked: true, ...defaultChartOptions.scales.y } } }
        });

        
        // V. –°—Ü–µ–Ω–∞—Ä–Ω–æ–µ –ú–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ: –£–ø—Ä–æ—â–µ–Ω–Ω—ã–π Stacked Bar
        new Chart(document.getElementById('scenarioChart'), {
            type: 'bar',
            data: {
                labels: ['–ü–ª–∞–Ω –ê (–ù–∞–¥–µ–∂–Ω—ã–π)', '–ü–ª–∞–Ω –ë (–†–∏—Å–∫–æ–≤–∞–Ω–Ω—ã–π)'].map(wrapLabel),
                datasets: [
                    {
                        label: '–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–µ –ó–∞—Ç—Ä–∞—Ç—ã (COGS)',
                        data: [120, 80], // 120 —Ç—ã—Å. vs 80 —Ç—ã—Å.
                        backgroundColor: chartColors.darkBlue,
                    },
                    {
                        label: '–ó–∞—Ç—Ä–∞—Ç—ã –Ω–∞ –•—Ä–∞–Ω–µ–Ω–∏–µ (OpEx)',
                        data: [30, 85], // 30 —Ç—ã—Å. vs 85 —Ç—ã—Å.
                        backgroundColor: chartColors.orange,
                    }
                ]
            },
            options: {
                ...defaultChartOptions,
                scales: {
                    x: {
                        stacked: true,
                        title: { display: true, text: '–ò—Ç–æ–≥–æ–≤–∞—è –û–±—â–∞—è –°—Ç–æ–∏–º–æ—Å—Ç—å (—Ç—ã—Å. $)'}
                    },
                    y: {
                        stacked: true,
                        ticks: {
                            callback: function(value) {
                                return value + 'K $';
                            }
                        }
                    }
                },
                 plugins: {
                    ...defaultChartOptions.plugins,
                    tooltip: {
                        callbacks: {
                            title: tooltipTitleCallback,
                             // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ–±—â—É—é —Å—Ç–æ–∏–º–æ—Å—Ç—å + –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—é
                            footer: (tooltipItems) => {
                                const totalCost = tooltipItems.reduce((sum, item) => sum + item.parsed.y, 0);
                                return `–û–±—â–∞—è –°—Ç–æ–∏–º–æ—Å—Ç—å: ${totalCost}K $`;
                            }
                        }
                    }
                }
            }
        });
        
        // 4. –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ó–∞–∫—É–ø–æ–∫: –£–ø—Ä–æ—â–µ–Ω–Ω—ã–π –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π Bar Chart
        new Chart(document.getElementById('procurementChart'), {
            type: 'bar',
            data: {
                labels: ['–°—ã—Ä—å–µ A', '–°—ã—Ä—å–µ B', '–£–ø–∞–∫–æ–≤–∫–∞ C', '–ö–æ–º–ø–ª–µ–∫—Ç—É—é—â–∏–µ D'].map(wrapLabel),
                datasets: [
                    {
                        label: '–ü–ª–∞–Ω–æ–≤–∞—è –ü–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—å',
                        data: [85, 20, 95, 60], 
                        backgroundColor: chartColors.magenta,
                    },
                    {
                        label: '–¢–µ–∫—É—â–∏–π –ó–∞–∫–∞–∑',
                        data: [75, 80, 80, 70], 
                        backgroundColor: chartColors.darkBlue,
                    }
                ]
            },
            options: {
                ...defaultChartOptions,
                indexAxis: 'y', // –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–µ —Å—Ç–æ–ª–±—Ü—ã
                scales: {
                    x: {
                        stacked: false,
                        suggestedMin: 0,
                        suggestedMax: 100,
                        title: { display: true, text: '–û–±—ä–µ–º (–µ–¥–∏–Ω–∏—Ü)' }
                    },
                    y: {
                        stacked: false,
                        grid: { display: false }
                    }
                },
                plugins: {
                    ...defaultChartOptions.plugins,
                    legend: {
                        position: 'top'
                    }
                }
            }
        });

    </script>
</body>
</html>
